!function(){var t=function(t){var e={exports:{}};return t.call(e.exports,e,e.exports),e.exports},T=function(){function r(t,e){var r=[],n=!0,o=!1,i=undefined;try{for(var u,a=t[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!e||r.length!==e);n=!0);}catch(s){o=!0,i=s}finally{try{!n&&a["return"]&&a["return"]()}finally{if(o)throw i}}return r}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return r(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(t){return t&&t.__esModule?t:{"default":t}},e=t(function(n){(function(){var t,e,r,C=[].slice;e=function(p){var O,g,t,N,_,H,q,I,f,$,v,e,r,F,U,b,n,o,l,D,i,u,a,s,M,c,h,d,m,y,w,T,E,K,x,j,A,S,k,R,G;for(f={},T={},M=0,w=!(i=/^[a-z]\w*(\.[a-z]\w*|\[\d+\])*$/i),m=[],q=x=K=null,(O={shouldDiscardEvent:{}}).getAttribute=function(t,e){return t.getAttribute("data-"+e)||t.getAttribute(e)},O.reset=function(t,e){var r,n,o,i,u,a;for(o in null==e&&(e=document.documentElement),f)if(r=null!=(a=f[o])?a.bindings:void 0)for(n=0,i=r.length;n<i;n++)(u=r[n]).teardown&&u.teardown();return f={},K=t,(x=e).bindingId=M=1,this},O.bind=function(t,e){return null==t&&(t=x),null==e&&(e=O.context(t)),N(e,t,r(t),!0)},O.afterBound=function(t){return q?q.push(t):t()},N=function(t,e,r,n){var o,i,u,a,s,l,c,f,h,d,p,g,v,b,m,y,w,T,E,x,A,S,k,R,G,C,L,P;if(q=[],h=null,e.bindingId&&O.unbind(e),c=O.getAttribute(e,"define-array")){for(g in A=I(e,t,c),null==r&&(r={}),r)P=r[g],A.hasOwnProperty(g)||(A[g]=P);r=A,(h=$(e)).indexes=r}for(u=null,d=0,m=(S=e.attributes).length;d<m;d++)L=(o=S[d]).name,U(L)&&(L=L.slice(5)),(l=O.bindingTypes[L])&&(null==u&&(u=[]),f=o.value,u.push([L,l,f]));if(u)for(null==h&&(h=$(e)),null==h.bindings&&(h.bindings=[]),null==h.indexes&&(h.indexes=r),p=0,y=(k=u.sort(_)).length;p<y;p++)(R=k[p])[0],(i=(l=R[1])(e,t,f=R[2],h))&&h.bindings.push(i);for((x=O.getAttribute(e,"context"))&&("$root"===(v=D(e,x))[0]&&(t=K,v=v.slice(1)),t=F(t,v)||j(t,v,{})),(h||x||n)&&(null==h&&(h=$(e)),h.childContext=t,null!=r&&null==h.indexes&&(h.indexes=r)),a=q,b=0,w=(G=H(e)).length;b<w;b++)s=G[b],N(t,s,null!=x?null:r);for(O.count=M,E=0,T=(C=a||[]).length;E<T;E++)(0,C[E])();return q=null,O},H=function(t){return t.children?Array.prototype.slice.call(t.children,0):[]},$=function(t){var e;return null==t.bindingId&&(t.bindingId=++M),null!=f[e=t.bindingId]?f[e]:f[e]={}},O.refresh=function(t){if(t&&m.push(t),!w)return w=!0,setTimeout(O.refreshImmediately,0)},y=function(t){var e,r,n,o;if(t.bindings)for(e=0,r=(o=t.bindings).length;e<r;e++)null!=(n=o[e]).refresh&&n.refresh()},O.refreshImmediately=function(){var t,e,r,n,o;for(n in w=!1,f)e=f[n],y(e);for(t=m,m=[],r=0,o=t.length;r<o;r++)(0,t[r])()},O.register=function(t,e){if(T[t])throw new Error("Twine error: '"+t+"' is already registered with Twine");return T[t]=e},O.change=function(t,e){var r;return null==e&&(e=!1),(r=document.createEvent("HTMLEvents")).initEvent("change",e,!0),t.dispatchEvent(r)},O.unbind=function(t){var e,r,n,o,i,u,a,s,l,c;if(n=t.bindingId){if(e=null!=(l=f[n])?l.bindings:void 0)for(o=0,u=e.length;o<u;o++)(s=e[o]).teardown&&s.teardown();delete f[n],delete t.bindingId}for(i=0,a=(c=H(t)).length;i<a;i++)r=c[i],O.unbind(r);return this},O.context=function(t){return e(t,!1)},O.childContext=function(t){return e(t,!0)},e=function(t,e){for(var r,n,o;t;){if(t===x)return K;if(e||(t=t.parentNode),!t)return console.warn("Unable to find context; please check that the node is attached to the DOM that Twine has bound, or that bindings have been initiated on this node's DOM"),null;if((n=t.bindingId)&&(r=null!=(o=f[n])?o.childContext:void 0))return r;e&&(t=t.parentNode)}},r=function(t){var e,r;for(null;t;){if(e=t.bindingId)return null!=(r=f[e])?r.indexes:void 0;t=t.parentNode}},O.contextKey=function(t,n){var e,r,o,i,u;for(i=[],e=function(t){var e,r;for(e in t)if(r=t[e],n===r){i.unshift(e);break}return n=t};t&&t!==x&&(t=t.parentNode);)(o=t.bindingId)&&(r=null!=(u=f[o])?u.childContext:void 0)&&e(r);return t===x&&e(K),i.join(".")},R=function(t){var e,r;return"input"===(e=t.nodeName.toLowerCase())||"textarea"===e||"select"===e?"checkbox"===(r=t.getAttribute("type"))||"radio"===r?"checked":"value":"textContent"},D=function(t,e){var r,n,o,i,u,a,s;for(i=[],n=o=0,u=(a=e.split(".")).length;o<u;n=++o)if(-1!==(s=(e=a[n]).indexOf("[")))for(0===n?i.push.apply(i,l(e.substr(0,s),t)):i.push(e.substr(0,s)),e=e.substr(s);-1!==(r=e.indexOf("]"));)i.push(parseInt(e.substr(1,r),10)),e=e.substr(r+1);else 0===n?i.push.apply(i,l(e,t)):i.push(e);return i},l=function(t,e){var r,n,o;return null!=(r=null!=(n=f[e.bindingId])&&null!=(o=n.indexes)?o[t]:void 0)?[t,r]:[t]},F=function(t,e){var r,n,o;for(r=0,o=e.length;r<o;r++)n=e[r],null!=t&&(t=t[n]);return t},j=function(t,e,r){var n,o,i,u,a,s;for(e=2<=(s=e).length?C.call(s,0,n=s.length-1):(n=0,[]),u=s[n++],o=0,a=e.length;o<a;o++)t=null!=t[i=e[o]]?t[i]:t[i]={};return t[u]=r},k=function(t){return[].map.call(t.attributes,function(t){return t.name+"="+JSON.stringify(t.value)}).join(" ")},G=function(t,e,r){var n,o;if(b(t)&&(o=D(r,t)))return"$root"===o[0]?function(t,e){return F(e,o)}:function(t){return F(t,o)};t="return "+t,s(r)&&(t="with($arrayPointers) { "+t+" }"),E(e)&&(t="with($registry) { "+t+" }");try{return new Function(e,"with($context) { "+t+" }")}catch(n){throw n,"Twine error: Unable to create function on "+r.nodeName+" node with attributes "+k(r)}},E=function(t){return/\$registry/.test(t)},s=function(t){var e;return null!=t.bindingId&&(null!=(e=f[t.bindingId])?e.indexes:void 0)},g=function(t,e){var r,n,o,i;if(!(n=s(t)))return{};for(o in i={},n)r=n[o],i[o]=e[o][r];return i},b=function(t){return"true"!==t&&"false"!==t&&"null"!==t&&"undefined"!==t&&i.test(t)},U=function(t){return"d"===t[0]&&"a"===t[1]&&"t"===t[2]&&"a"===t[3]&&"-"===t[4]},v=function(t){var e;return(e=document.createEvent("CustomEvent")).initCustomEvent("bindings:change",!0,!1,{}),t.dispatchEvent(e)},_=function(t,e){var r,n,o;return n=t[0],o=e[0],(r={define:1,bind:2,eval:3})[n]?r[o]?r[n]-r[o]:-1:1},O.bindingTypes={bind:function(e,r,t){var n,o,i,u,a,s,l,c,f,h,d;return d=R(e),h=e[d],c=a=void 0,o="radio"===e.getAttribute("type"),i=G(t,"$context,$root,$arrayPointers",e),s=function(){var t;if((t=i.call(e,r,K,g(e,r)))!==a&&(a=t)!==e[d])return e[d]=o?t===e.value:t,v(e)},b(t)?(l=function(){if(o){if(!e.checked)return;return j(r,u,e.value)}return j(r,u,e[d])},u=D(e,t),f="textContent"!==d&&"hidden"!==e.type,"$root"===u[0]&&(r=K,u=u.slice(1)),null==h||!f&&""===h||null!=F(r,u)||l(),f&&(n=function(){if(F(r,u)!==this[d])return l(),O.refreshImmediately()},p(e).on("input keyup change",n),c=function(){return p(e).off("input keyup change",n)}),{refresh:s,teardown:c}):{refresh:s}},"bind-show":function(e,r,t){var n,o;return n=G(t,"$context,$root,$arrayPointers",e),o=void 0,{refresh:function(){var t;if((t=!n.call(e,r,K,g(e,r)))!==o)return p(e).toggleClass("hide",o=t)}}},"bind-class":function(u,a,t){var s,l,c;return l=G(t,"$context,$root,$arrayPointers",u),c={},s=p(u),{refresh:function(){var t,e,r,n,o,i;for(e in t=[],i=[],n=l.call(u,a,K,g(u,a)))n[e],r=n[e]=!!n[e],(null!=(o=c[e])?o:s.hasClass(e))!==r&&(r?t.push(e):i.push(e));return i.length&&s.removeClass(i.join(" ")),t.length&&s.addClass(t.join(" ")),c=n}}},"bind-attribute":function(n,o,t){var i,u;return i=G(t,"$context,$root,$arrayPointers",n),u={},{refresh:function(){var t,e,r;for(t in e=i.call(n,o,K,g(n,o)))r=e[t],u[t]!==r&&p(n).attr(t,r||null);return u=e}}},define:function(t,e,r){var n,o,i;for(n in o=G(r,"$context,$root,$registry,$arrayPointers",t).call(t,e,K,T,g(t,e)))i=o[n],e[n]=i},eval:function(t,e,r){G(r,"$context,$root,$registry,$arrayPointers",t).call(t,e,K,T,g(t,e))}},I=function(t,e,r){var n,o,i,u;for(o in n={},i=G(r,"$context,$root",t).call(t,e,K)){if(u=i[o],null==e[o]&&(e[o]=[]),!(e[o]instanceof Array))throw"Twine error: expected '"+o+"' to be an array";n[o]=e[o].length,e[o].push(u)}return n},S=function(i,t){var u;return u="checked"===i||"indeterminate"===i||"disabled"===i||"readOnly"===i||"draggable"===i,O.bindingTypes["bind-"+t.toLowerCase()]=function(e,r,t){var n,o;return n=G(t,"$context,$root,$arrayPointers",e),o=void 0,{refresh:function(){var t;if(t=n.call(e,r,K,g(e,r)),u&&(t=!!t),t!==o)return e[i]=o=t,"checked"===i?v(e):void 0}}}},n=0,u=(h=["placeholder","checked","indeterminate","disabled","href","title","readOnly","src","draggable"]).length;n<u;n++)S(t=h[n],t);for(S("innerHTML","unsafe-html"),c=function(t){var e;return!("submit"!==t.type&&"a"!==t.currentTarget.nodeName.toLowerCase()||"false"!==(e=O.getAttribute(t.currentTarget,"allow-default"))&&!1!==e&&0!==e&&null!=e)},A=function(a){return O.bindingTypes["bind-event-"+a]=function(o,i,u){var t;return t=function(t,e){var r,n;if(((n="function"==typeof(r=O.shouldDiscardEvent)[a]?r[a](t):void 0)||c(t))&&t.preventDefault(),!n)return G(u,"$context,$root,$arrayPointers,event,data",o).call(o,i,K,g(o,i),t,e),O.refreshImmediately()},p(o).on(a,t),{teardown:function(){return p(o).off(a,t)}}}},o=0,a=(d=["click","dblclick","mouseenter","mouseleave","mouseover","mouseout","mousedown","mouseup","submit","dragenter","dragleave","dragover","drop","drag","change","keypress","keydown","keyup","input","error","done","success","fail","blur","focus","load","paste"]).length;o<a;o++)A(d[o]);return O},"function"==typeof(t=this).define&&t.define.amd?t.define(["jquery"],e):n.exports?(r="undefined"!=typeof window?$:$(t),n.exports=e(r)):t.Twine=e(t.jQuery)}).call(this)});t(function(){window.Twine=e}),t(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=window.Twine,window.Bindings=null!=e["default"]?e["default"]:e}),t(function(t,e){"use strict";function u(t){var e=0<arguments.length&&t!==undefined?arguments[0]:function(){return{}};w=e}function r(t){try{location.href!==b&&(m={});var e=void 0;if(null!=w&&(e=w()||{},v["default"].reset(e),t||v["default"].bind(),w=null),t){var r=!0,n=!1,o=undefined;try{for(var i,u=t[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var a=i.value;v["default"].bind(a)}}catch(g){n=!0,o=g}finally{try{!r&&u["return"]&&u["return"]()}finally{if(n)throw o}}}var s=!0,l=!1,c=undefined;try{for(var f,h=y[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var d=T(f.value,2),p=d[0];(0,d[1])(p)}}catch(g){l=!0,c=g}finally{try{!s&&h["return"]&&h["return"]()}finally{if(l)throw c}}y.length=0,v["default"].refreshImmediately(),e&&"function"==typeof e.pageLoaded&&e.pageLoaded()}catch(g){throw g}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=u;var n=o($),a=o(_),v=o(Twine),b=location.href,m={},y=[],w=void 0;u.getLastUrl=function(){return b},u.onRefresh=function(r){for(var t=arguments.length,e=Array(1<t?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];var o=void 0,i=void 0;e[1]?(o=e[0],i=e[1]):i=e[0],o&&v["default"].afterBound(function(){var t=v["default"].contextKey(o,r),e=m[t];e&&y.push([e,i]),m[t]=r})},u.pushState=function(t){window.history.pushState({turbolinks:!0,url:t},null,t)},u.replaceState=function(t){window.history.replaceState({turbolinks:!0,url:t},null,t)},u.openPopup=function(t,e,r){var n={width:500,height:500,directories:"no",location:"no",menubar:"no",resizeable:"yes",scrollbars:"yes",toolbar:"no",status:"no"},o=a["default"].defaults(r,n),i=a["default"].map(o,function(t,e){return e+"="+t}).toString();u.open(t,e,i)},document.addEventListener("DOMContentLoaded",function(){return r()}),document.addEventListener("page:load",function(t){r(t.data),b=location.href}),document.addEventListener("page:before-partial-replace",function(t){var e=t.data,r=!0,n=!1,o=undefined;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var a=i.value;v["default"].unbind(a)}}catch(s){n=!0,o=s}finally{try{!r&&u["return"]&&u["return"]()}finally{if(n)throw o}}}),document.addEventListener("page:after-node-removed",function(t){return(0,n["default"])(t.data).remove()}),(0,n["default"])(document).ajaxComplete(function(){return v["default"].refresh()}),window.Page=null!=e["default"]?e["default"]:e});(function(){null==window.TurboGraft&&(window.TurboGraft={handlers:{}}),TurboGraft.tgAttribute=function(t){return"tg-"===t.slice(0,3)?"data-"+t:"data-tg-"+t},TurboGraft.getTGAttribute=function(t,e){var r;return r=TurboGraft.tgAttribute(e),t.getAttribute(r)||t.getAttribute(e)},TurboGraft.removeTGAttribute=function(t,e){var r;return r=TurboGraft.tgAttribute(e),t.removeAttribute(r),t.removeAttribute(e)},TurboGraft.hasTGAttribute=function(t,e){var r;return r=TurboGraft.tgAttribute(e),t.hasAttribute(r)||t.hasAttribute(e)},TurboGraft.querySelectorAllTGAttribute=function(t,e,r){var n;return null==r&&(r=null),n=TurboGraft.tgAttribute(e),r?t.querySelectorAll("["+n+"="+r+"], ["+e+"="+r+"]"):t.querySelectorAll("["+n+"], ["+e+"]")}}).call(this),function(){window.Click=function(){function e(t){this.event=t,this.event.defaultPrevented||(this._extractLink(),this._validForTurbolinks()&&(Turbolinks.visit(this.link.href),this.event.preventDefault()))}return e.installHandlerLast=function(t){if(!t.defaultPrevented)return document.removeEventListener("click",e.handle,!1),document.addEventListener("click",e.handle,!1)},e.handle=function(t){return new e(t)},e.prototype._extractLink=function(){var t;for(t=this.event.target;t.parentNode&&"A"!==t.nodeName;)t=t.parentNode;if("A"===t.nodeName&&0!==t.href.length)return this.link=new Link(t)},e.prototype._validForTurbolinks=function(){return null!=this.link&&!(this.link.shouldIgnore()||this._nonStandardClick())},e.prototype._nonStandardClick=function(){return 1<this.event.which||this.event.metaKey||this.event.ctrlKey||this.event.shiftKey||this.event.altKey},e}()}.call(this),function(){window.ComponentUrl=function(){function e(t){if(this.original=null!=t?t:document.location.href,this.original.constructor===e)return this.original;this._parse()}return e.prototype.withoutHash=function(){return this.href.replace(this.hash,"")},e.prototype.withoutHashForIE10compatibility=function(){return this.withoutHash()},e.prototype.hasNoHash=function(){return 0===this.hash.length},e.prototype._parse=function(){var t;return(null!=this.link?this.link:this.link=document.createElement("a")).href=this.original,t=this.link,this.href=t.href,this.protocol=t.protocol,this.host=t.host,this.hostname=t.hostname,this.port=t.port,this.pathname=t.pathname,this.search=t.search,this.hash=t.hash,this.origin=[this.protocol,"//",this.hostname].join(""),0!==this.port.length&&(this.origin+=":"+this.port),this.relative=[this.pathname,this.search,this.hash].join(""),this.absolute=this.href},e}()}.call(this),function(){window.CSRFToken=function(){function t(){}return t.get=function(t){var e;return null==t&&(t=document),{node:e=t.querySelector('meta[name="csrf-token"]'),token:null!=e&&"function"==typeof e.getAttribute?e.getAttribute("content"):void 0}},t.update=function(t){var e;if(null!=(e=this.get()).token&&null!=t&&e.token!==t)return e.node.setAttribute("content",t)},t}()}.call(this),function(){TurboGraft.Document={create:function(t){var e;return/<(html|body)/i.test(t)?(e=document.documentElement.cloneNode()).innerHTML=t:(e=document.documentElement.cloneNode(!0)).querySelector("body").innerHTML=t,e.head=e.querySelector("head"),e.body=e.querySelector("body"),e}}}.call(this),function(){var e,o,n;e=function(t,e){return t.classList.contains(e)},o=function(t){return t.getAttribute("disabled")||e(t,"disabled")},n=function(t,e,r){var n,o;if(null==r&&(r=null),!(n=t.getAttribute("href")||t.getAttribute("action")))throw new Error("Turbograft developer error: You did not provide a URL ('"+urlAttribute+"' attribute) for data-tg-remote");return TurboGraft.getTGAttribute(t,"remote-once")&&(TurboGraft.removeTGAttribute(t,"remote-once"),TurboGraft.removeTGAttribute(t,"tg-remote")),o={httpRequestType:e,httpUrl:n,fullRefresh:null!=TurboGraft.getTGAttribute(t,"full-refresh"),refreshOnSuccess:TurboGraft.getTGAttribute(t,"refresh-on-success"),refreshOnSuccessExcept:TurboGraft.getTGAttribute(t,"full-refresh-on-success-except"),refreshOnError:TurboGraft.getTGAttribute(t,"refresh-on-error"),refreshOnErrorExcept:TurboGraft.getTGAttribute(t,"full-refresh-on-error-except")},new TurboGraft.Remote(o,r,t)},TurboGraft.handlers.remoteMethodHandler=function(t){var e,r;r=t.clickTarget,(e=TurboGraft.getTGAttribute(r,"tg-remote"))&&(t.preventDefault(),n(r,e).submit())},TurboGraft.handlers.remoteFormHandler=function(t){var e,r;e=(r=t.target).getAttribute("method"),TurboGraft.hasTGAttribute(r,"tg-remote")&&(t.preventDefault(),n(r,e,r).submit())},function(t,n,e){null==e&&(e=!1),document.addEventListener(t,function(t){var e,r;for(r=t.target;r!==document&&null!=r;){if(("A"===r.nodeName||"BUTTON"===r.nodeName)&&((e=o(r))&&t.preventDefault(),!e))return t.clickTarget=r,void n(t);r=r.parentNode}})}("click",TurboGraft.handlers.remoteMethodHandler,!0),document.addEventListener("submit",function(t){return TurboGraft.handlers.remoteFormHandler(t)})}.call(this),function(){var e=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,i=[].slice;window.Link=function(t){function o(t){if(this.link=t,this.link.constructor===o)return this.link;this.original=this.link.href,o.__super__.constructor.apply(this,arguments)}return e(o,t),o.HTML_EXTENSIONS=["html"],o.allowExtensions=function(){var t,e,r,n;for(r=0,n=(e=1<=arguments.length?i.call(arguments,0):[]).length;r<n;r++)t=e[r],o.HTML_EXTENSIONS.push(t);return o.HTML_EXTENSIONS},o.prototype.shouldIgnore=function(){return this._crossOrigin()||this._anchored()||this._nonHtml()||this._optOut()||this._target()},o.prototype._crossOrigin=function(){return this.origin!==(new ComponentUrl).origin},o.prototype._anchored=function(){var t;return(this.hash&&this.withoutHash())===(t=new ComponentUrl).withoutHash()||this.href===t.href+"#"},o.prototype._nonHtml=function(){return this.pathname.match(/\.[a-z]+$/g)&&!this.pathname.match(new RegExp("\\.(?:"+o.HTML_EXTENSIONS.join("|")+")?$","g"))},o.prototype._optOut=function(){var t,e;for(e=this.link;!t&&e!==document&&null!==e;)t=null!=e.getAttribute("data-no-turbolink"),e=e.parentNode;return t},o.prototype._target=function(){return 0!==this.link.target.length},o}(ComponentUrl)}.call(this),function(){var c,r,f;window.Page||(window.Page={}),Page.visit=function(t,e){return null==e&&(e={}),e.reload?window.location=t:Turbolinks.visit(t)},Page.refresh=function(t,e){var r,n,o,i;return null==t&&(t={}),r=t.url?t.url:t.queryParams?((n=$.param(t.queryParams))&&(n="?"+n),location.pathname+n):location.href,o={partialReplace:!0,exceptKeys:t.exceptKeys,onlyKeys:t.onlyKeys,updatePushState:t.updatePushState,callback:e},(i=t.response)?Turbolinks.loadPage(null,i,o):Turbolinks.visit(r,o)},Page.open=function(){return window.open.apply(window,arguments)},f=[],Page.onReplace=function(t,e){if(!t||!e)throw new Error("Page.onReplace: Node and callback must both be specified");if(!r(e))throw new Error("Page.onReplace: Callback must be a function");return f.push({node:t,callback:e})},r=function(t){return!!(t&&t.constructor&&t.call&&t.apply)},c=function(t,e){return t.contains?t.contains(e):!!(t===e||t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)},document.addEventListener("page:before-partial-replace",function(t){var e,r,n,o,i,u,a,s,l;for(s=t.data,l=[],n=0,i=f.length;n<i;n++){for(e=f[n],r=!1,o=0,u=s.length;o<u;o++)if(a=s[o],c(a,e.node)){e.callback(),r=!0;break}r||l.push(e)}return f=l}),document.addEventListener("page:before-replace",function(){var t,e;for(t=0,e=f.length;t<e;t++)f[t].callback();return f=[]})}.call(this),function(){var c=function(t,e){return function(){return t.apply(e,arguments)}};TurboGraft.Remote=function(){function t(t,e,r){var n,o,i,u,a,s,l;this.opts=t,this.onError=c(this.onError,this),this.onSuccess=c(this.onSuccess,this),this.initiator=e||r,this.actualRequestType="get"===(null!=(o=this.opts.httpRequestType)?o.toLowerCase():void 0)?"GET":"POST",this.useNativeEncoding=this.opts.useNativeEncoding,this.formData=this.createPayload(e),this.opts.refreshOnSuccess&&(this.refreshOnSuccess=this.opts.refreshOnSuccess.split(" ")),this.opts.refreshOnSuccessExcept&&(this.refreshOnSuccessExcept=this.opts.refreshOnSuccessExcept.split(" ")),this.opts.refreshOnError&&(this.refreshOnError=this.opts.refreshOnError.split(" ")),this.opts.refreshOnErrorExcept&&(this.refreshOnErrorExcept=this.opts.refreshOnErrorExcept.split(" ")),u=new XMLHttpRequest,"GET"===this.actualRequestType?(i=this.formData?this.opts.httpUrl+"?"+this.formData:this.opts.httpUrl,u.open(this.actualRequestType,i,!0)):u.open(this.actualRequestType,this.opts.httpUrl,!0),u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.setRequestHeader("Accept","text/html, application/xhtml+xml, application/xml"),this.contentType&&u.setRequestHeader("Content-Type",this.contentType),u.setRequestHeader("X-XHR-Referer",document.location.href),(n=CSRFToken.get().token)&&u.setRequestHeader("X-CSRF-Token",n),triggerEventFor("turbograft:remote:init",this.initiator,{xhr:u,initiator:this.initiator}),u.addEventListener("loadstart",(a=this,function(){return triggerEventFor("turbograft:remote:start",a.initiator,{xhr:u})})),u.addEventListener("error",this.onError),u.addEventListener("load",(s=this,function(t){return u.status<400?s.onSuccess(t):s.onError(t)})),u.addEventListener("loadend",(l=this,function(){var t;return"function"==typeof(t=l.opts).done&&t.done(),triggerEventFor("turbograft:remote:always",l.initiator,{initiator:l.initiator,xhr:u})})),this.xhr=u}return t.prototype.submit=function(){return this.xhr.send(this.formData)},t.prototype.createPayload=function(t){var e;return(e=t?this.useNativeEncoding||0<t.querySelectorAll("[type='file'][name]").length?this.nativeEncodeForm(t):this.uriEncodeForm(t):"")instanceof FormData||(this.contentType="application/x-www-form-urlencoded; charset=UTF-8",-1===e.indexOf("_method")&&this.opts.httpRequestType&&"GET"!==this.actualRequestType&&(e=this.formAppend(e,"_method",this.opts.httpRequestType))),e},t.prototype.formAppend=function(t,e,r){return t.length&&(t+="&"),t+(encodeURIComponent(e)+"=")+encodeURIComponent(r)},t.prototype.uriEncodeForm=function(t){var e,r;return e="",this._iterateOverFormInputs(t,(r=this,function(t){return e=r.formAppend(e,t.name,t.value)})),e},t.prototype.formDataAppend=function(t,e){var r,n,o,i;if("file"===e.type)for(n=0,o=(i=e.files).length;n<o;n++)r=i[n],t.append(e.name,r);else t.append(e.name,e.value);return t},t.prototype.nativeEncodeForm=function(t){var e,r;return e=new FormData,this._iterateOverFormInputs(t,(r=this,function(t){return e=r.formDataAppend(e,t)})),e},t.prototype._iterateOverFormInputs=function(t,e){var r,n,o,i,u,a,s;for(s=[],r=0,u=(i=this._enabledInputs(t)).length;r<u;r++)o=!(n=i[r]).disabled,a="checkbox"===n.type||"radio"===n.type,o&&n.name&&(a&&n.checked||!a)?s.push(e(n)):s.push(void 0);return s},t.prototype._enabledInputs=function(t){var e,r,n,o,i,u,a,s,l,c,f;if(f="input:not([type='reset']):not([type='button']):not([type='submit']):not([type='image']), select, textarea",u=Array.prototype.slice.call(t.querySelectorAll(f)),!(r=Array.prototype.slice.call(TurboGraft.querySelectorAllTGAttribute(t,"tg-remote-noserialize"))).length)return u;for(o=0,s=(e=r).length;o<s;o++)c=r[o],e=e.concat(Array.prototype.slice.call(c.querySelectorAll(f)));for(n=[],a=0,l=u.length;a<l;a++)i=u[a],e.indexOf(i)<0&&n.push(i);return n},t.prototype.onSuccess=function(t){var e,r,n;if("function"==typeof(e=this.opts).success&&e.success(),n=t.target,triggerEventFor("turbograft:remote:success",this.initiator,{initiator:this.initiator,xhr:n}),!(r=n.getResponseHeader("X-Next-Redirect")))return TurboGraft.hasTGAttribute(this.initiator,"tg-remote-norefresh")?void 0:this.opts.fullRefresh&&this.refreshOnSuccess?Page.refresh({onlyKeys:this.refreshOnSuccess}):this.opts.fullRefresh?Page.refresh():this.refreshOnSuccess?Page.refresh({response:n,onlyKeys:this.refreshOnSuccess}):this.refreshOnSuccessExcept?Page.refresh({response:n,exceptKeys:this.refreshOnSuccessExcept}):Page.refresh({response:n});Page.visit(r,{reload:!0})},t.prototype.onError=function(t){var e,r;return"function"==typeof(e=this.opts).fail&&e.fail(),r=t.target,triggerEventFor("turbograft:remote:fail",this.initiator,{initiator:this.initiator,xhr:r}),TurboGraft.hasTGAttribute(this.initiator,"tg-remote-norefresh")?triggerEventFor("turbograft:remote:fail:unhandled",this.initiator,{xhr:r}):this.opts.fullRefresh&&this.refreshOnError?Page.refresh({onlyKeys:this.refreshOnError}):this.opts.fullRefresh?Page.refresh():this.refreshOnError?Page.refresh({response:r,onlyKeys:this.refreshOnError}):this.refreshOnErrorExcept?Page.refresh({response:r,exceptKeys:this.refreshOnErrorExcept}):triggerEventFor("turbograft:remote:fail:unhandled",this.initiator,{xhr:r})},t}()}.call(this),function(){TurboGraft.Response=function(){function t(t,e){var r;this.xhr=t,r=e&&e.withoutHash()!==this.xhr.responseURL?this.xhr.responseURL:this.xhr.getResponseHeader("X-XHR-Redirected-To"),this.finalURL=r||e}return t.prototype.valid=function(){return this.hasRenderableHttpStatus()&&this.hasValidContent()},t.prototype.document=function(){if(this.valid())return TurboGraft.Document.create(this.xhr.responseText)},t.prototype.hasRenderableHttpStatus=function(){var t;return 422===this.xhr.status||!(400<=(t=this.xhr.status)&&t<600)},t.prototype.hasValidContent=function(){var t;if(t=this.xhr.getResponseHeader("Content-Type"))return t.match(/^(?:text\/html|application\/xhtml\+xml|application\/xml)(?:;|$)/);throw new Error("Error encountered for XHR Response: "+this)},t.prototype.toString=function(){return"URL: "+this.xhr.responseURL+", ReadyState: "+this.xhr.readyState+", Headers: "+this.xhr.getAllResponseHeaders()},t}(),TurboGraft.location=function(){return location.href}}.call(this),function(){var o,e,i,r,u,n,a,s,l,c,f,h,d,p,g,v=function(t,e){return function(){return t.apply(e,arguments)}};e="[data-turbolinks-track]",i="turbolinksTrack",o="true",h={},f=null,g=function(){var t;return t=Object.keys(h).map(function(t){return h[t]}),Promise.all(t)},TurboGraft.TurboHead=function(){function t(t,e){this.activeDocument=t,this.upstreamDocument=e,this._insertNewAssets=v(this._insertNewAssets,this),this.activeAssets=a(this.activeDocument),this.upstreamAssets=a(this.upstreamDocument),this.newScripts=this.upstreamAssets.filter(r("nodeName","SCRIPT")).filter(l("src",this.activeAssets)),this.newLinks=this.upstreamAssets.filter(r("nodeName","LINK")).filter(l("href",this.activeAssets))}return t._testAPI={reset:function(){return h={},f=null}},t.prototype.hasChangedAnonymousAssets=function(){var t,e,r,n;return e=this.upstreamAssets.filter(u(i,o)),(t=this.activeAssets.filter(u(i,o))).length!==e.length||(n=l("src",e),r=l("href",e),t.some(function(t){return n(t)||r(t)}))},t.prototype.movingFromTrackedToUntracked=function(){return 0===this.upstreamAssets.length&&0<this.activeAssets.length},t.prototype.hasNamedAssetConflicts=function(){return this.newScripts.concat(this.newLinks).filter(c(i,o)).some(n(i,this.activeAssets))},t.prototype.hasAssetConflicts=function(){return this.movingFromTrackedToUntracked()||this.hasNamedAssetConflicts()||this.hasChangedAnonymousAssets()},t.prototype.waitForAssets=function(){return"function"==typeof f&&f({isCanceled:!0}),new Promise((e=this,function(t){return f=t,g().then(e._insertNewAssets).then(g).then(t)}));var e},t.prototype._insertNewAssets=function(){return d(this.activeDocument,this.newLinks),p(this.activeDocument,this.newScripts)},t}(),a=function(t){return[].slice.call(t.querySelectorAll(e))},r=function(e,r){return function(t){return t[e]===r}},l=function(r,t){return function(e){return!t.some(function(t){return e[r]===t[r]})}},u=function(e,r){return function(t){return t.dataset[e]===r}},c=function(e,r){return function(t){return t.dataset[e]!==r}},n=function(r,n){return function(t){var e;return e=t.dataset[r],n.some(u(r,e))}},d=function(r,t){return t.forEach(function(t){var e;return e=t.cloneNode(),r.head.appendChild(e),triggerEvent("page:after-link-inserted",e)})},p=function(e,t){var r;return r=Promise.resolve(),t.forEach(function(t){return r=r.then(function(){return s(e,t)})}),r},s=function(t,e){var r,n,o,i,u,a;if(a=e.src,h[a])return h[a];for(i=t.createElement("SCRIPT"),n=0,o=(u=e.attributes).length;n<o;n++)r=u[n],i.setAttribute(r.name,r.value);return i.appendChild(t.createTextNode(e.innerHTML)),h[a]=new Promise(function(e){var r;return r=function(t){return"error"===t.type&&triggerEvent("page:#script-error",t),i.removeEventListener("load",r),i.removeEventListener("error",r),e()},i.addEventListener("load",r),i.addEventListener("error",r),t.head.appendChild(i),triggerEvent("page:after-script-inserted",i)})}}.call(this),function(){var A,S,k,t,R,e,r,n,o,i,G,C,u,L;A=TurboGraft.Response,S=TurboGraft.TurboHead,o=window.jQuery,L=null,k=document,r=function(){return k.addEventListener("DOMContentLoaded",function(){return triggerEvent("page:change"),triggerEvent("page:update")},!0)},n=function(){if(void 0!==o)return o(k).on("ajaxSuccess",function(t,e){if(o.trim(e.responseText))return triggerEvent("page:update")})},e=void 0!==window.history.state||navigator.userAgent.match(/Firefox\/2[6|7]/),t=window.history&&window.history.pushState&&window.history.replaceState&&e,window.triggerEvent=function(t,e){var r;return r=k.createEvent("Events"),e&&(r.data=e),r.initEvent(t,!0,!0),k.dispatchEvent(r)},window.triggerEventFor=function(t,e,r){var n;return n=k.createEvent("Events"),r&&(n.data=r),n.initEvent(t,!0,!0),e.dispatchEvent(n)},u="GET"===(i=function(t){var e,r;return r=(null!=(e=k.cookie.match(new RegExp(t+"=(\\w+)")))?e[1].toUpperCase():void 0)||"",k.cookie=t+"=; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/",r}("request_method"))||""===i,R=t&&u,k.addEventListener&&k.createEvent&&(r(),n()),C=function(t,e){var r;return r=e.parentNode.replaceChild(t,e),triggerEvent("page:after-node-removed",r)},G=function(t){var e;return e=t.parentNode.removeChild(t),triggerEvent("page:after-node-removed",e)},window.Turbolinks=function(){function u(){}var l,t,i,c,f,h,e,r,d,p,n,a,g,o,v,s,b,m,y,w,T,E,x;return s=null,e=function(t,e){if(null==e&&(e={}),!o(t))return t=new ComponentUrl(t),w(),r(t,e)},a=function(t,e){var r,n;return Boolean(e.partialReplace||(null!=(r=e.onlyKeys)?r.length:void 0)||(null!=(n=e.exceptKeys)?n.length:void 0))},u.fullPageNavigate=function(t){null!=t&&(t=new ComponentUrl(t).absolute,triggerEvent("page:before-full-refresh",{url:t}),k.location.href=t)},u.pushState=function(t,e,r){return window.history.pushState(t,e,r)},u.replaceState=function(t,e,r){return window.history.replaceState(t,e,r)},u.document=function(t){return t&&(k=t),k},r=function(t,e){var r,n,o;for(r in triggerEvent("page:fetch",{url:t.absolute}),null!=L&&(L.readyState=0,L.statusText="abort",L.abort()),(L=new XMLHttpRequest).open("GET",t.withoutHashForIE10compatibility(),!0),L.setRequestHeader("Accept","text/html, application/xhtml+xml, application/xml"),L.setRequestHeader("X-XHR-Referer",s),null==e.headers&&(e.headers={}),n=e.headers)o=n[r],L.setRequestHeader(r,o);L.onload=function(){return 500<=L.status?u.fullPageNavigate(t):u.loadPage(t,L,e),L=null},L.onerror=function(){if("abort"!==L.statusText)return u.fullPageNavigate(t);L=null},L.send()},u.loadPage=function(t,e,r){var n,o,i;return null==r&&(r={}),triggerEvent("page:receive"),n=new A(e,t),null==r.updatePushState&&(r.updatePushState=!0),r.partialReplace=a(n,r),(i=n.document())?r.partialReplace?void x(i,n,r):(o=new S(k,i)).hasAssetConflicts()?u.fullPageNavigate(n.finalURL):o.waitForAssets().then(function(t){if(!(null!=t?t.isCanceled:void 0))return x(i,n,r)}):(triggerEvent("page:error",e),void u.fullPageNavigate(n.finalURL))},x=function(t,e,r){var n,o;return n=i(null!=(o=t.querySelector("title"))?o.textContent:void 0,T(t.querySelector("body")),CSRFToken.get(t).token,"runScripts",r),r.updatePushState&&b(e.finalURL),r.partialReplace||u.resetScrollPosition(),"function"==typeof r.callback&&r.callback(),triggerEvent("page:load",n)},i=function(t,e,r,n,o){var i,u,a,s;if(null==o&&(o={}),t&&(k.title=t),null!=(a=o.onlyKeys)?a.length:void 0)return u=[].concat(p(),d(o.onlyKeys)),i=y(u,e),l(i)&&E(),i;y(p(),e),v(e),(null!=(s=o.exceptKeys)?s.length:void 0)?m(o.exceptKeys,e):c(e),triggerEvent("page:before-replace"),C(e,k.body),null!=r&&CSRFToken.update(r),E(),n&&h(),window.history.state,triggerEvent("page:change"),triggerEvent("page:update")},d=function(t){var e,r,n,o,i,u,a,s;for(u=[],e=0,o=t.length;e<o;e++)for(n=t[e],r=0,i=(s=TurboGraft.querySelectorAllTGAttribute(k,"refresh",n)).length;r<i;r++)a=s[r],u.push(a);return u},p=function(){var t,e,r,n,o;for(r=[],t=0,e=(o=TurboGraft.querySelectorAllTGAttribute(k,"refresh-always")).length;t<e;t++)n=o[t],r.push(n);return r},l=function(t){var e,r;for(e=0,r=t.length;e<r;e++)if(0<t[e].querySelectorAll("input[autofocus], textarea[autofocus]").length)return!0;return!1},E=function(){
var t,e;if((t=(e=k.querySelectorAll("input[autofocus], textarea[autofocus]"))[e.length-1])&&k.activeElement!==t)return t.focus()},c=function(t){var e,r,n,o;for(e=0,r=(o=TurboGraft.querySelectorAllTGAttribute(t,"refresh-never")).length;e<r;e++)n=o[e],G(n)},y=function(o,t){var e,r,n,i,u,a,s;for(triggerEvent("page:before-partial-replace",o),a=function(t){var e,r,n;for(e=0,r=o.length;e<r;e++)if(t!==(n=o[e])&&n.contains(t))return!0;return!1},s=[],r=0,n=o.length;r<n;r++)if(!a(e=o[r])){if(!(u=e.getAttribute("id")))throw new Error("Turbolinks refresh: Refresh key elements must have an id.");(i=t.querySelector("#"+u))?(i=i.cloneNode(!0),C(i,e),"SCRIPT"===i.nodeName&&"false"!==i.dataset.turbolinksEval?f(i):s.push(i)):TurboGraft.hasTGAttribute(e,"refresh-always")||G(e)}return s},g=function(t,e){var r,n,o,i,u,a;for(a=[],n=0,o=e.length;n<o;n++){if(!(i=(r=e[n]).getAttribute("id")))throw new Error("TurboGraft refresh: Kept nodes must have an id.");(u=t.querySelector("#"+i))?a.push(C(r,u)):a.push(void 0)}return a},v=function(t){var e,r,n,o,i;for(e=[],r=0,n=(i=TurboGraft.querySelectorAllTGAttribute(k,"tg-static")).length;r<n;r++)o=i[r],e.push(o);g(t,e)},m=function(t,e){var r,n,o,i,u,a,s,l;for(r=[],n=0,u=t.length;n<u;n++)for(i=t[n],o=0,a=(l=TurboGraft.querySelectorAllTGAttribute(k,"refresh",i)).length;o<a;o++)s=l[o],r.push(s);g(e,r)},h=function(){var t,e,r,n,o;for(t=0,e=(o=Array.prototype.slice.call(k.body.querySelectorAll('script:not([data-turbolinks-eval="false"])'))).length;t<e;t++)""!==(r=(n=o[t]).type)&&"text/javascript"!==r||f(n)},f=function(t){var e,r,n,o,i,u,a;for(r=k.createElement("script"),n=0,o=(a=t.attributes).length;n<o;n++)e=a[n],r.setAttribute(e.name,e.value);r.appendChild(k.createTextNode(t.innerHTML)),u=t.parentNode,i=t.nextSibling,u.removeChild(t),u.insertBefore(r,i)},T=function(t){return t.innerHTML=t.innerHTML.replace(/<noscript[\S\s]*?<\/noscript>/gi,""),t},b=function(t){(t=new ComponentUrl(t)).absolute!==s&&u.pushState({turbolinks:!0,url:t.absolute},"",t.absolute)},w=function(){return s=k.location.href},u.rememberCurrentUrl=function(){return u.replaceState({turbolinks:!0,url:k.location.href},"",k.location.href)},u.rememberCurrentState=function(){return window.history.state},function(t){return window.scrollTo(t.positionX,t.positionY)},u.resetScrollPosition=function(){return k.location.hash?k.location.href=k.location.href:window.scrollTo(0,0)},o=function(t){return!triggerEvent("page:before-change",t)},n=function(t){var e;if(null!=(e=t.state)?e.turbolinks:void 0)return u.visit(t.target.location.href)},t=function(t){return setTimeout(t,500)},R?(u.visit=e,u.rememberCurrentUrl(),u.rememberCurrentState(),k.addEventListener("click",Click.installHandlerLast,!0),t(function(){return window.addEventListener("popstate",n,!1)})):u.visit=function(t){return k.location.href=t},u}()}.call(this);t(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=window.Turbograft,window.Turbograft=null!=e["default"]?e["default"]:e}),t(function(){"use strict";window.Bugsnag&&(window.Bugsnag.metaData.bundles.tnt=!0)})}("undefined"!=typeof global?global:"undefined"!=typeof window&&window);